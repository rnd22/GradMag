<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bulletins • SBU Grad Mag</title>
  <meta name="description" content="Browse Graduate Arts & Sciences Magazine bulletins by year, topic, and keyword." />

  <!-- Fonts (match the rest of the site) -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Source+Sans+Pro:wght@400;600;700&display=swap" rel="stylesheet" />

  <!-- Base styles -->
  <style>
    :root{
      --bg:#ffffff; --text:#272829; --accent:#0563bb; --muted:#6b7280; --card:#f8fafc; --ring: #dbeafe;
      --radius: 16px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{font-family:"Source Sans Pro", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; color:var(--text); background:var(--bg);}
    a{color:var(--accent); text-decoration:none}
    a:hover{text-decoration:underline}

    /* Header / Nav */
    header{position:sticky; top:0; z-index:50; background:#fff; border-bottom:1px solid #eef2f7}
    .container{max-width:1100px; margin:0 auto; padding:0 18px}
    .nav{display:flex; align-items:center; justify-content:space-between; padding:14px 0}
    .brand{display:flex; align-items:center; gap:10px}
    .brand-logo{width:36px; height:36px; border-radius:50%; background:#000 url('images/HumanConnection.jpg') center/cover no-repeat; box-shadow:0 0 0 2px #000 inset}
    .brand-title{font-family:"Playfair Display", serif; font-weight:700; font-size:1.15rem; letter-spacing:.2px}
    .nav-links{display:flex; gap:16px; flex-wrap:wrap}
    .nav-links a{color:#111; font-weight:600}
    .nav-links a[aria-current="page"]{color:var(--accent)}

    /* Page hero */
    .hero{padding:44px 0 24px}
    .section-kicker{color:var(--accent); font-weight:700; letter-spacing:.08em; text-transform:uppercase; font-size:.8rem}
    h1{font-family:"Playfair Display", serif; font-size:2.1rem; margin:.35rem 0 0}
    .sub{color:var(--muted); margin-top:6px}

    /* Controls */
    .controls{display:grid; grid-template-columns:1.2fr .8fr .8fr; gap:12px; margin-top:22px}
    .control{position:relative}
    .control input, .control select{width:100%; padding:12px 14px; border:1px solid #e5e7eb; border-radius:12px; font:inherit; background:#fff; outline:none}
    .control input:focus, .control select:focus{border-color:#93c5fd; box-shadow:0 0 0 4px var(--ring)}
    .pillbar{display:flex; align-items:center; flex-wrap:wrap; gap:8px; margin-top:10px}
    .pill{background:#eef2f7; color:#111; padding:6px 10px; border-radius:999px; font-size:.85rem; cursor:pointer; border:1px solid #e5e7eb}
    .pill[aria-pressed="true"]{background:#dbeafe; border-color:#bfdbfe}

    /* Grid */
    .grid{display:grid; grid-template-columns:repeat(3, 1fr); gap:16px; margin:22px 0 60px}
    .card{background:var(--card); border:1px solid #e5e7eb; border-radius:var(--radius); overflow:hidden; display:flex; flex-direction:column; min-height:220px}
    .thumb{display:block; height:160px; background:#f1f5f9; border-bottom:1px solid #e5e7eb; position:relative}
    .thumb::after{content:"PDF"; position:absolute; top:10px; left:10px; font-weight:700; font-size:.72rem; background:#111; color:#fff; padding:4px 6px; border-radius:6px; letter-spacing:.04em}
    .pdf-icon{position:absolute; inset:0; display:flex; align-items:center; justify-content:center; font-size:48px; opacity:.12}
    .card-head{padding:16px 16px 6px}
    .tagrow{display:flex; gap:8px; flex-wrap:wrap; margin-bottom:8px}
    .tag{font-size:.75rem; background:#eef2f7; color:#111; border:1px solid #e5e7eb; border-radius:999px; padding:4px 8px}
    .card h3{font-family:"Playfair Display", serif; font-size:1.15rem; margin:4px 0}
    .meta{color:#6b7280; font-size:.9rem}
    .card-body{padding:0 16px 14px; color:#374151; flex:1}
    .card-foot{display:flex; gap:8px; padding:12px 16px 16px}
    .btn{display:inline-flex; align-items:center; gap:8px; border-radius:10px; padding:9px 12px; border:1px solid #d1d5db; background:#fff; color:#111; font-weight:600; text-decoration:none}
    .btn:hover{background:#f3f4f6}
    .btn.primary{background:#111; color:#fff; border-color:#111}
    .btn.primary:hover{opacity:.92}

    /* Empty state */
    .empty{border:2px dashed #e5e7eb; border-radius:16px; padding:28px; text-align:center; color:#6b7280}

    /* Footer */
    footer{border-top:1px solid #eef2f7; padding:28px 0; color:#6b7280}

    /* Responsive */
    @media (max-width: 980px){.grid{grid-template-columns:repeat(2, 1fr)} .controls{grid-template-columns:1fr 1fr}}
    @media (max-width: 640px){.grid{grid-template-columns:1fr} .controls{grid-template-columns:1fr} .brand-title{font-size:1rem}}
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand">
        <div class="brand-logo" aria-hidden="true"></div>
        <div class="brand-title">SBU Graduate Arts & Sciences Magazine</div>
      </div>
      <nav class="nav-links">
        <a href="index.html">Home</a>
        <a href="publications.html">Publications</a>
        <a href="press.html">Press</a>
        <a href="execboard.html">Executive Board</a>
        <a href="bulletin.html" aria-current="page">Bulletins</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <div class="section-kicker">Bulletins</div>
      <h1>News & Announcements</h1>
      <p class="sub">Quick reads from the Graduate Arts & Sciences Magazine — calls for submissions, event updates, and community highlights.</p>

      <div class="controls" role="region" aria-label="Filters">
        <label class="control" aria-label="Search bulletins">
          <input id="q" type="search" placeholder="Search bulletins (title & summary)…" />
        </label>
        <label class="control" aria-label="Filter by year">
          <select id="year">
            <option value="">All years</option>
          </select>
        </label>
        <label class="control" aria-label="Sort order">
          <select id="sort">
            <option value="new">Newest first</option>
            <option value="old">Oldest first</option>
          </select>
        </label>
      </div>
      <div class="pillbar" id="topicBar" aria-label="Topics"></div>
    </section>

    <section id="results">
      <div class="grid" id="grid" hidden></div>
      <div class="empty" id="empty" hidden>
        No bulletins found. Try a different search, year, or topic.
      </div>
    </section>
  </main>

  <!-- Inline PDF preview dialog -->
  <dialog id="pdfDialog" style="width:min(1000px, 92vw); height:min(90vh, 900px); border:1px solid #e5e7eb; border-radius:16px; padding:0; overflow:hidden;">
    <div style="display:flex; align-items:center; justify-content:space-between; padding:10px 14px; border-bottom:1px solid #e5e7eb; background:#fff;">
      <strong id="pdfTitle" style="font-family: 'Playfair Display', serif; font-size:1rem"></strong>
      <div style="display:flex; gap:8px; align-items:center;">
        <a id="pdfDownload" class="btn" href="#" download>Download</a>
        <button id="pdfClose" class="btn" type="button">Close</button>
      </div>
    </div>
    <iframe id="pdfFrame" title="Bulletin PDF preview" style="width:100%; height:calc(100% - 46px); border:0;" src="about:blank"></iframe>
  </dialog>

  <footer>
    <div class="container">© <span id="yr"></span> SBU Graduate Arts & Sciences Magazine</div>
  </footer>

  <!-- Data + Renderer -->
  <script>
    // 1) SOURCE OF TRUTH: add/edit bulletins here.
    //    Use absolute or relative URLs to PDF files in your repo (e.g., assets/bulletins/...).
    const BULLETINS = [
      {
        title: "Fall 2025 Submissions Open (PDF)",
        date: "2025-09-01",
        summary: "We’re seeking science writing, poetry, visual art, and interviews for our Fall issue.",
        topics: ["Submissions", "Opportunities"],
        url: "assets/bulletins/fall-2025-submissions.pdf"
      },
      {
        title: "Science Communication Workshop (Oct 10) — Bulletin PDF",
        date: "2025-09-06",
        summary: "Hands-on session on narrative structure, visual clarity, and public engagement.",
        topics: ["Events", "Workshops"],
        url: "assets/bulletins/scicomm-workshop-oct10-2025.pdf"
      },
      {
        title: "Spring 2024 Issue — Bulletin Announcement (PDF)",
        date: "2024-04-15",
        summary: "Flip through the latest issue online and share with friends and colleagues.",
        topics: ["Publications"],
        url: "assets/bulletins/spring-2024-issue-announcement.pdf"
      },
      {
        title: "Graduate Art Night Recap — Bulletin PDF",
        date: "2023-11-09",
        summary: "Highlights and photos from our community showcase.",
        topics: ["Community", "Events"],
        url: "assets/bulletins/grad-art-night-recap-2023.pdf"
      }
    ];

    // 2) Utility helpers
    const $$ = (sel, el=document) => el.querySelector(sel);
    const $$$ = (sel, el=document) => Array.from(el.querySelectorAll(sel));
    const fmt = (d) => new Date(d).toLocaleDateString(undefined, {year:'numeric', month:'short', day:'numeric'});

    // 3) Populate year + topics
    const years = Array.from(new Set(BULLETINS.map(b=> new Date(b.date).getFullYear()))).sort((a,b)=>b-a);
    const yearSelect = $$('#year');
    years.forEach(y=>{ const o=document.createElement('option'); o.value=String(y); o.textContent=y; yearSelect.appendChild(o); });

    const topicSet = new Set(BULLETINS.flatMap(b=>b.topics));
    const topicBar = $$('#topicBar');
    const activeTopics = new Set();
    topicSet.forEach(t=>{
      const b=document.createElement('button');
      b.type='button'; b.className='pill'; b.textContent=t; b.setAttribute('aria-pressed','false');
      b.addEventListener('click',()=>{ const on=b.getAttribute('aria-pressed')==='true'; b.setAttribute('aria-pressed', String(!on)); if(on){activeTopics.delete(t)} else {activeTopics.add(t)} render();});
      topicBar.appendChild(b);
    });

    // 4) Render cards
    const grid = $$('#grid');
    const empty = $$('#empty');
    const q = $$('#q');
    const sortSel = $$('#sort');

    function filterData(){
      const query = q.value.trim().toLowerCase();
      const y = yearSelect.value;
      let data = BULLETINS.slice();
      if(query){ data = data.filter(b => (b.title+" "+b.summary).toLowerCase().includes(query)); }
      if(y){ data = data.filter(b => String(new Date(b.date).getFullYear()) === y); }
      if(activeTopics.size){ data = data.filter(b => b.topics.some(t => activeTopics.has(t))); }
      data.sort((a,b)=> sortSel.value==='new' ? (new Date(b.date)-new Date(a.date)) : (new Date(a.date)-new Date(b.date)) );
      return data;
    }

    function render(){
      const data = filterData();
      grid.innerHTML = '';
      data.forEach(b=>{
        const el = document.createElement('article');
        el.className='card';
        const isPDF = b.url?.toLowerCase().endsWith('.pdf');
        const openLabel = isPDF ? 'View PDF' : 'Open';
        const downloadAttr = isPDF ? `download` : '';
        el.innerHTML = `
          <a class="thumb" href="${b.url}" target="_blank" rel="noopener noreferrer" aria-label="Open ${isPDF ? 'PDF' : 'link'}: ${b.title}">
            <div class="pdf-icon">📄</div>
          </a>
          <div class="card-head">
            <div class="tagrow">${b.topics.map(t=>`<span class=\"tag\">${t}</span>`).join('')}</div>
            <h3>${b.title}</h3>
            <div class="meta">${fmt(b.date)}</div>
          </div>
          <div class="card-body">${b.summary}</div>
          <div class="card-foot">
            <button class="btn primary" data-open-preview="true" data-url="${b.url}" data-title="${b.title}">${openLabel}</button>
            <a class="btn" href="${b.url}" ${downloadAttr}>Download</a>
          </div>`;
        grid.appendChild(el);
      });
      const none = data.length === 0;
      grid.hidden = none; empty.hidden = !none;
    }

    // 5) Wire up controls
    q.addEventListener('input', render);
    yearSelect.addEventListener('change', render);
    sortSel.addEventListener('change', render);

    // PDF preview dialog handlers
    const dlg = document.getElementById('pdfDialog');
    const frame = document.getElementById('pdfFrame');
    const titleEl = document.getElementById('pdfTitle');
    const downloadEl = document.getElementById('pdfDownload');
    document.addEventListener('click', (e)=>{
      const btn = e.target.closest('[data-open-preview]');
      if(!btn) return;
      const url = btn.getAttribute('data-url');
      const title = btn.getAttribute('data-title');
      titleEl.textContent = title;
      downloadEl.href = url;
      frame.src = url + (url.includes('#') ? '' : '#toolbar=1&navpanes=0');
      if(typeof dlg.showModal === 'function') dlg.showModal();
    });
    document.getElementById('pdfClose').addEventListener('click', ()=>{ frame.src='about:blank'; dlg.close(); });

    // 6) init
    document.getElementById('yr').textContent = new Date().getFullYear();
    render();
  </script>
</body>
</html>
